<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
    namespace="jp.terasoluna.fw.batch.executor.dao.CommonPostgreSQLDao">

    <!-- 入力したシーケンスの次値を取得する -->
    <select id="sysCodeReader" parameterType="String" resultType="String">
        SELECT
            TO_CHAR(nextval(#seqName#),'FM00000000') AS SEQ
    </select>

    <!-- カレント時刻を取得する（精度はミリ秒まで） -->
    <select id="currentTimeReader" resultType="java.sql.Timestamp">
        SELECT
            TO_TIMESTAMP(TO_CHAR(A.SYS_DATE, 'YYYY-MM-DD ') || TO_CHAR(CURRENT_TIMESTAMP, 'HH24:MI:SS.MS'), 'YYYY-MM-DD HH24:MI:SS.MS') AS SYS_DATE
        FROM
            (
                SELECT
                    current_date AS SYS_DATE
            ) AS A
    </select>

    <!-- カレント日付を取得する -->
    <select id="currentDateReader" resultType="java.sql.Date">
        SELECT
            current_date AS SYS_DATE
    </select>

</mapper>