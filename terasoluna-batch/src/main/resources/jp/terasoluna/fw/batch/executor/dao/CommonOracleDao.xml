<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
    namespace="jp.terasoluna.fw.batch.executor.dao.CommonOracleDao">

    <!-- 入力したシーケンスの次値を取得する -->
    <select id="sysCodeReader" parameterType="String" resultType="String">
        SELECT
            TO_CHAR($seqName$.nextval,'FM00000000') AS SEQ
        FROM
            DUAL
    </select>

    <!-- カレント時刻を取得する（精度はミリ秒まで） -->
    <select id="currentTimeReader" resultType="java.lang.Object">
        SELECT
            TO_TIMESTAMP(TO_CHAR(current_date, 'YYYY-MM-DD ') || TO_CHAR(CURRENT_TIMESTAMP, 'HH24:MI:SS.FF3'), 'YYYY-MM-DD HH24:MI:SS.FF3') AS SYS_DATE
        FROM
            DUAL
    </select>

    <!-- カレント日付を取得する -->
    <select id="currentDateReader" resultType="java.sql.Date">
        SELECT
            current_date AS SYS_DATE
    </select>

</mapper>